<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Kurikulum Smansaba</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="admin.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Dashboard Header -->
    <header class="dashboard-header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <span>Kurikulum Smansaba - Admin</span>
            </div>
            <div class="user-info">
                <span class="welcome-text">Selamat datang, <span id="adminName">Administrator</span></span>
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
    </header>

    <!-- Dashboard Content -->
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <a href="#overview" class="nav-item active" onclick="showSection('overview')">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Overview</span>
                </a>
                <a href="#reports" class="nav-item" onclick="showSection('reports')">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Laporan Kehadiran</span>
                </a>
                <a href="#analytics" class="nav-item" onclick="showSection('analytics')">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analitik</span>
                </a>
                <a href="#files" class="nav-item" onclick="showSection('files')">
                    <i class="fas fa-folder"></i>
                    <span>File Guru</span>
                </a>
                <a href="#deep-analysis" class="nav-item" onclick="showSection('deep-analysis')">
                    <i class="fas fa-chart-line"></i>
                    <span>Analisis Mendalam</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Overview Section -->
            <section id="overview" class="content-section active">
                <div class="section-header">
                    <h2>Dashboard Overview</h2>
                    <p>Monitoring sistem manajemen sekolah</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-clipboard-check"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalReports">0</h3>
                            <p>Total Laporan</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-week"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="weeklyReports">0</h3>
                            <p>Laporan Minggu Ini</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="monthlyReports">0</h3>
                            <p>Laporan Bulan Ini</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="activeClasses">0</h3>
                            <p>Kelas Aktif</p>
                        </div>
                    </div>
                </div>

                <!-- Recent Reports -->
                <div class="recent-reports">
                    <h3>Laporan Terbaru</h3>
                    <div class="reports-preview" id="recentReportsPreview">
                        <!-- Recent reports will be loaded here -->
                    </div>
                    <button class="view-all-btn" onclick="showSection('reports')">
                        <i class="fas fa-eye"></i>
                        Lihat Semua Laporan
                    </button>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="content-section">
                <div class="section-header">
                    <h2>Laporan Kehadiran</h2>
                    <p>Kelola dan monitor laporan kehadiran dari perwakilan kelas</p>
                </div>

                <!-- Filters -->
                <div class="reports-filters">
                    <div class="filter-group">
                        <label for="filterMonth">Bulan</label>
                        <select id="filterMonth">
                            <option value="">Semua Bulan</option>
                            <option value="1">Januari</option>
                            <option value="2">Februari</option>
                            <option value="3">Maret</option>
                            <option value="4">April</option>
                            <option value="5">Mei</option>
                            <option value="6">Juni</option>
                            <option value="7">Juli</option>
                            <option value="8">Agustus</option>
                            <option value="9">September</option>
                            <option value="10">Oktober</option>
                            <option value="11">November</option>
                            <option value="12">Desember</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="filterYear">Tahun</label>
                        <select id="filterYear">
                            <option value="2024">2024</option>
                            <option value="2025">2025</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="filterClass">Kelas</label>
                        <input type="text" id="filterClass" placeholder="Cari kelas...">
                    </div>
                    <button class="filter-btn" onclick="loadReports()">
                        <i class="fas fa-search"></i>
                        Filter
                    </button>
                    <button class="export-btn" onclick="exportReports()">
                        <i class="fas fa-download"></i>
                        Export
                    </button>
                </div>

                <!-- Reports List -->
                <div class="reports-container">
                    <div class="reports-summary" id="reportsSummary">
                        <!-- Summary cards will be loaded here -->
                    </div>
                    <div class="reports-list" id="reportsList">
                        <!-- Reports will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="content-section">
                <div class="section-header">
                    <h2>Analitik Kehadiran</h2>
                    <p>Analisis data kehadiran guru dan tren pembelajaran</p>
                </div>

                <!-- Analytics Filters -->
                <div class="analytics-filters">
                    <div class="filter-group">
                        <label for="analyticsTeacher">Filter Guru</label>
                        <select id="analyticsTeacher">
                            <option value="">Semua Guru</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="analyticsClass">Filter Kelas</label>
                        <select id="analyticsClass">
                            <option value="">Semua Kelas</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="analyticsMonth">Bulan</label>
                        <select id="analyticsMonth">
                            <option value="">Semua Bulan</option>
                            <option value="1">Januari</option>
                            <option value="2">Februari</option>
                            <option value="3">Maret</option>
                            <option value="4">April</option>
                            <option value="5">Mei</option>
                            <option value="6">Juni</option>
                            <option value="7">Juli</option>
                            <option value="8">Agustus</option>
                            <option value="9">September</option>
                            <option value="10">Oktober</option>
                            <option value="11">November</option>
                            <option value="12">Desember</option>
                        </select>
                    </div>
                    <button class="filter-btn" onclick="loadAnalytics()">
                        <i class="fas fa-chart-bar"></i>
                        Analisis
                    </button>
                    <button class="export-btn" onclick="exportAnalytics()">
                        <i class="fas fa-file-csv"></i>
                        Export CSV
                    </button>
                </div>

                <div class="analytics-grid">
                    <!-- Class Performance -->
                    <div class="analytics-card">
                        <h3>Laporan per Kelas</h3>
                        <div class="class-stats" id="classStats">
                            <!-- Class statistics will be loaded here -->
                        </div>
                    </div>

                    <!-- Teacher Performance -->
                    <div class="analytics-card">
                        <h3>Performa Guru</h3>
                        <div class="teacher-performance" id="teacherPerformance">
                            <!-- Teacher performance will be loaded here -->
                        </div>
                    </div>

                    <!-- Attendance Summary -->
                    <div class="analytics-card full-width">
                        <h3>Ringkasan Kehadiran</h3>
                        <div class="attendance-summary" id="attendanceSummary">
                            <!-- Attendance summary will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Detailed Statistics Table -->
                <div class="detailed-stats">
                    <div class="stats-header">
                        <h3>Statistik Detail</h3>
                        <button class="export-btn" onclick="exportDetailedStats()">
                            <i class="fas fa-download"></i>
                            Download Excel
                        </button>
                    </div>
                    <div class="stats-table-container">
                        <table class="stats-table" id="detailedStatsTable">
                            <thead>
                                <tr>
                                    <th>Guru</th>
                                    <th>Mata Pelajaran</th>
                                    <th>Kelas</th>
                                    <th>Total Laporan</th>
                                    <th>Hadir</th>
                                    <th>Terlambat</th>
                                    <th>Tidak Hadir</th>
                                    <th>% Kehadiran</th>
                                </tr>
                            </thead>
                            <tbody id="detailedStatsBody">
                                <!-- Detailed stats will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Files Section -->
            <section id="files" class="content-section">
                <div class="section-header">
                    <h2>File Administrasi Guru</h2>
                    <p>Monitor file yang diupload oleh guru</p>
                </div>

                <div class="files-overview">
                    <div class="file-stats-grid">
                        <div class="file-stat-card">
                            <div class="file-stat-icon">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <div class="file-stat-info">
                                <h3 id="totalFiles">0</h3>
                                <p>Total File</p>
                            </div>
                        </div>
                        <div class="file-stat-card">
                            <div class="file-stat-icon">
                                <i class="fas fa-chalkboard-teacher"></i>
                            </div>
                            <div class="file-stat-info">
                                <h3 id="rppFiles">0</h3>
                                <p>File RPP</p>
                            </div>
                        </div>
                        <div class="file-stat-card">
                            <div class="file-stat-icon">
                                <i class="fas fa-book"></i>
                            </div>
                            <div class="file-stat-info">
                                <h3 id="syllabusFiles">0</h3>
                                <p>File Silabus</p>
                            </div>
                        </div>
                    </div>

                    <div class="files-list" id="teacherFilesList">
                        <!-- Teacher files will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Deep Analysis Section -->
            <section id="deep-analysis" class="content-section">
                <div class="section-header">
                    <h2>Analisis Mendalam</h2>
                    <p>Analisis komprehensif kehadiran guru dan kepatuhan pelaporan kelas</p>
                </div>

                <!-- Advanced Filters -->
                <div class="deep-analysis-filters">
                    <div class="filter-row">
                        <div class="filter-group">
                            <label for="startDate">Tanggal Mulai</label>
                            <input type="date" id="startDate" name="startDate">
                        </div>
                        <div class="filter-group">
                            <label for="endDate">Tanggal Akhir</label>
                            <input type="date" id="endDate" name="endDate">
                        </div>
                        <div class="filter-group">
                            <label for="deepAnalysisTeacher">Filter Guru</label>
                            <select id="deepAnalysisTeacher">
                                <option value="">Semua Guru</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="deepAnalysisClass">Filter Kelas</label>
                            <select id="deepAnalysisClass">
                                <option value="">Semua Kelas</option>
                            </select>
                        </div>
                    </div>
                    <div class="filter-actions">
                        <button class="filter-btn" onclick="loadDeepAnalysis()">
                            <i class="fas fa-search"></i>
                            Analisis
                        </button>
                        <button class="export-btn" onclick="exportRekapitulasi()">
                            <i class="fas fa-file-csv"></i>
                            Download Rekapitulasi (CSV)
                        </button>
                        <button class="export-btn secondary" onclick="exportDetailedReport()">
                            <i class="fas fa-file-excel"></i>
                            Export Detail Excel
                        </button>
                    </div>
                </div>

                <!-- Summary Cards -->
                <div class="analysis-summary">
                    <div class="summary-cards-grid">
                        <div class="analysis-summary-card">
                            <div class="summary-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="summary-content">
                                <h3 id="totalTeachersAnalyzed">0</h3>
                                <p>Total Guru Dianalisis</p>
                            </div>
                        </div>
                        <div class="analysis-summary-card">
                            <div class="summary-icon">
                                <i class="fas fa-school"></i>
                            </div>
                            <div class="summary-content">
                                <h3 id="totalClassesAnalyzed">0</h3>
                                <p>Total Kelas Aktif</p>
                            </div>
                        </div>
                        <div class="analysis-summary-card">
                            <div class="summary-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="summary-content">
                                <h3 id="totalReportsAnalyzed">0</h3>
                                <p>Total Laporan</p>
                            </div>
                        </div>
                        <div class="analysis-summary-card">
                            <div class="summary-icon">
                                <i class="fas fa-percentage"></i>
                            </div>
                            <div class="summary-content">
                                <h3 id="overallAttendanceRate">0%</h3>
                                <p>Tingkat Kehadiran</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Teacher Analysis -->
                <div class="teacher-analysis-section">
                    <div class="analysis-header">
                        <h3>Analisis per Guru</h3>
                        <div class="analysis-controls">
                            <button class="sort-btn" onclick="sortTeacherAnalysis('attendance')">
                                <i class="fas fa-sort"></i>
                                Urutkan Kehadiran
                            </button>
                            <button class="sort-btn" onclick="sortTeacherAnalysis('name')">
                                <i class="fas fa-sort-alpha-down"></i>
                                Urutkan Nama
                            </button>
                        </div>
                    </div>
                    <div class="teacher-analysis-grid" id="teacherAnalysisGrid">
                        <!-- Teacher analysis cards will be loaded here -->
                    </div>
                </div>

                <!-- Class Compliance Analysis -->
                <div class="class-analysis-section">
                    <div class="analysis-header">
                        <h3>Kepatuhan Pelaporan per Kelas</h3>
                        <div class="analysis-controls">
                            <button class="sort-btn" onclick="sortClassAnalysis('compliance')">
                                <i class="fas fa-sort"></i>
                                Urutkan Kepatuhan
                            </button>
                            <button class="sort-btn" onclick="sortClassAnalysis('reports')">
                                <i class="fas fa-sort-numeric-down"></i>
                                Urutkan Laporan
                            </button>
                        </div>
                    </div>
                    <div class="class-analysis-grid" id="classAnalysisGrid">
                        <!-- Class analysis cards will be loaded here -->
                    </div>
                </div>

                <!-- Detailed Data Table -->
                <div class="detailed-analysis-table">
                    <div class="table-header">
                        <h3>Data Detail Kehadiran</h3>
                        <div class="table-controls">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" id="searchDetailedData" placeholder="Cari guru atau mata pelajaran...">
                            </div>
                            <button class="export-btn" onclick="exportCurrentTable()">
                                <i class="fas fa-download"></i>
                                Export Tabel
                            </button>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="detailed-analysis-table-content" id="detailedAnalysisTable">
                            <thead>
                                <tr>
                                    <th onclick="sortTable(0)">Guru <i class="fas fa-sort"></i></th>
                                    <th onclick="sortTable(1)">Mata Pelajaran <i class="fas fa-sort"></i></th>
                                    <th onclick="sortTable(2)">Kelas <i class="fas fa-sort"></i></th>
                                    <th onclick="sortTable(3)">Total Laporan <i class="fas fa-sort"></i></th>
                                    <th onclick="sortTable(4)">Hadir <i class="fas fa-sort"></i></th>
                                    <th onclick="sortTable(5)">Terlambat <i class="fas fa-sort"></i></th>
                                    <th onclick="sortTable(6)">Tidak Hadir <i class="fas fa-sort"></i></th>
                                    <th onclick="sortTable(7)">% Kehadiran <i class="fas fa-sort"></i></th>
                                    <th onclick="sortTable(8)">Periode Terakhir <i class="fas fa-sort"></i></th>
                                </tr>
                            </thead>
                            <tbody id="detailedAnalysisTableBody">
                                <!-- Detailed analysis data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="admin-dashboard.js"></script>
</body>
</html>